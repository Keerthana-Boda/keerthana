				Health Logger
Course-end Project 2
DESCRIPTION
Build an application to manage patient details and record patient vitals

Index.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title> </title>
</head>
<body>
<center>
<form action = "adminLogin.jsp" >
<br><br><br><br>
<h1> Health Logger</h1>
<h6> Developed by Keerthana</h6>
<br>
<input type = "Submit" value = "Doctor Login">
</form>
</center>
</body>
</html>

adminLogin.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<center>
<form action = "checkLogin.jsp" method = "post" >
<br><br><br><br>
<h1> Health Logger</h1>
<h6> Developed by Keerthana</h6>
<br>
Enter Email
<br><input type = "text" name = "email"><br>
Enter Password
<br><input type = "text" name = "pwd"><br>
<input type = "Submit" value = "Login">
</form>
</center>
</body>
</html>

checkLogin.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>   
<%@ page language="java" import="java.sql.*"%>    
<%@page import="java.util.*"%>
<sql:setDataSource
        var="Health"
        driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/Health"
        user="root" password="Simplilearn"
    />   
<%
String email = request.getParameter("email");
String pwd = request.getParameter("pwd");
boolean status=false;
try{
Class.forName("com.mysql.jdbc.Driver");
Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/Health", "root", "Simplilearn");
PreparedStatement ps=con.prepareStatement("select * from user where email=? and pwd=? ");
ps.setString(1,email);
ps.setString(2,pwd);
ResultSet rs=ps.executeQuery();
status=rs.next();
if(status){
%>
<jsp:forward page="adminHome.jsp"></jsp:forward>
<%
}
else{
System.out.println("hi");
System.out.print("Error, Sorry! Username or Password Error. plz Enter Correct Detail or Register");
session.setAttribute("Loginmsg","plz sign in first");
%>
<jsp:forward page="adminLogin.jsp"></jsp:forward>
<%
}
}
catch(Exception e){
e.printStackTrace();
}
%>

adminHome.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<center>
<br><br><br><br>
<h1> Health Logger</h1>
<h6> Developed by Keerthana</h6>
<br>
<a href = "managePatients.jsp"> Manage Patients </a><br>
<a href = "manageVitals.jsp"> Manage Vitals </a>
</center>
</body>
</body>
</html>
        
managePatients.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>   
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1> Doctor Home Page </h1>
<input type = "Button" value = "Logout"><br>
<a href = "searchPatient.jsp"> Search Patient </a><	 >
<a href = "patientForm.jsp"> Add Patient </a><  >
<a href = "manageVitals.jsp"> Manage Vitals </a>
<br>
<sql:setDataSource
        var="Health"
        driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/Health"
        user="root" password="Simplilearn"
    />
     <sql:query var="listPatients"   dataSource="${Health}">
        SELECT * FROM patients;
    </sql:query>     
    <div align="center">
        <table border="1" cellpadding="5">           
            <tr>
                <th>Sr.No</th>
                <th>Name-Age</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Diagnosis</th>
                <th>Remark</th>
                <th>Gender</th>
                <th>Action</th>
            </tr>
            <c:forEach var="patients" items="${listPatients.rows}">
                <tr>
                    <td><c:out value="${patients.id}" /></td>
                    <td><c:out value="${patients.Name_age}" /></td>
                    <td><c:out value="${patients.email}" /></td>
                    <td><c:out value="${patients.phone}" /></td>
                    <td><c:out value="${patients.diagnosis}" /></td>
                    <td><c:out value="${patients.remark}" /></td>
                    <td><c:out value="${patients.gender}" /></td>
                    <td><a href = "manageVitals.jsp"> Manage Vitals</a>
                    		   <a href = "patientForm.jsp"> Update</a> 
                    		   <a href = "patientForm.jsp"> Delete</a></td>
                </tr>
            </c:forEach>
        </table>
    </div>
</body>
</html>

manageVitals.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>   
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1> Doctor Home Page </h1>
<input type = "Button" value = "Logout"><br>
<a href = "patientForm.jsp"> Manage Patients </a>
<a href = "NewFile.html"> View Graph </a>
<a href = "vitalForm.jsp"> Record New Vitals </a>
<br>
<sql:setDataSource
        var="Health"
        driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/Health"
        user="root" password="Simplilearn"
    />
     <sql:query var="listvitals"   dataSource="${Health}">
        SELECT * FROM vitals;
    </sql:query>     
    <div align="center">
        <table border="1" cellpadding="5">            
            <tr>
                <th>Sr.No</th>
                <th>Name</th>
                <th>Phone</th>
                <th>BPLow</th>
                <th>BPHigh</th>
                <th>SPO2</th>
                <th>Recorded On</th>
                <th>Action</th>
            </tr>
            <c:forEach var="vitals" items="${listvitals.rows}">
                <tr>
                    <td><c:out value="${vitals.ID}" /></td>
                    <td><c:out value="${vitals.Name}" /></td>
                    <td><c:out value="${vitals.phone}" /></td>
                    <td><c:out value="${vitals.BPLow}" /></td>
                    <td><c:out value="${vitals.BPHigh}" /></td>
                    <td><c:out value="${vitals.SPO2}" /></td>
                    <td><c:out value="${vitals.RecordedOn}" /></td>
                    <td><a href = "delete.jsp"> Delete</a></td>
                </tr>
            </c:forEach>
        </table>
    </div>
</body>
</html>

DBUtil.java

package com.simpli;
import java.sql.*;
public class DBUtil {
	Connection connection;
	public DBUtil(String dbURL, String user, String pwd) {

		try {
		// step 1 : Loading the JDBC driver class;
		Class.forName("com.mysql.jdbc.Driver");

		// step 2 : Use the Driver Manager to get a connection to the database;
		this.connection = DriverManager.getConnection(dbURL, user, pwd);
		}catch (ClassNotFoundException e) {
			System.out.println(e);
		}catch (SQLException e) {
			System.out.println(e);
		}
	}
	public Connection getConnection() {
		return this.connection;
	}
	public void closeConnection() throws SQLException {
		if (this.connection != null)
			this.connection.close();
	}
}

addPatients.java

package com.simpli;

import java.io.IOException;
import java.io.InputStream;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class patientVitals
 */
@WebServlet("/add-patients")
public class addPatients extends HttpServlet {
	private static final long serialVersionUID = 1L;
	Connection connection = null;
	public void init() throws ServletException 
	{
		super.init();
		// Load the DB properties from the config file
		InputStream in = getServletContext().getResourceAsStream("config.properties");
		Properties props = new Properties();
		try 
		{
			props.load(in);
		} catch (IOException e) 
		{
			System.out.println(e);
		}
		DBUtil dbutil = new DBUtil(props.getProperty("url"), props.getProperty("userid"),
		props.getProperty("password"));
		connection = dbutil.getConnection();
		System.out.println("DB Connection initialized successfully!.<br>");
	}
    public addPatients() {
        super();
        // TODO Auto-generated constructor stub
    }
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		PrintWriter out = response.getWriter();
		out.println("<html><body>");		
		try {
			PreparedStatement pStmt = connection.prepareStatement("INSERT INTO patients(Name_age,email,phone,diagnosis,remark,gender) values(?,?,?,?,?,?)");
			pStmt.setString(1, request.getParameter("name"));	
			pStmt.setString(2, request.getParameter("email"));
			pStmt.setString(3, request.getParameter("phone"));
			pStmt.setString(4, request.getParameter("diagnosis"));
			pStmt.setString(5, request.getParameter("remarks"));
			pStmt.setString(6, request.getParameter("gender"));
			pStmt.execute();			
			out.println("Succeussfully added");
		} catch (SQLException e) {
			e.printStackTrace();
		}
		out.println("</body></html>");
	}
}

patientVitals.java

package com.simpli;
import java.io.IOException;
import java.io.InputStream;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.Properties;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
@WebServlet("/patient-vitals")
public class patientVitals extends HttpServlet {
	private static final long serialVersionUID = 1L;
	Connection connection = null;
	public void init() throws ServletException 
	{
		super.init();
		// Load the DB properties from the config file
		InputStream in = getServletContext().getResourceAsStream("config.properties");
		Properties props = new Properties();
		try 
		{
			props.load(in);
		} catch (IOException e) 
		{
			System.out.println(e);
		}
		DBUtil dbutil = new DBUtil(props.getProperty("url"), props.getProperty("userid"),
		props.getProperty("password"));
		connection = dbutil.getConnection();
		System.out.println("DB Connection initialized successfully!.<br>");
	}
    public patientVitals() {
        super();
    }
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		PrintWriter out = response.getWriter();
		out.println("<html><body>");
		try {
			PreparedStatement pStmt = connection.prepareStatement("INSERT INTO vitals(Name,phone,BPLow,BPHigh,SPO2) values(?,?,?,?,?)");
			pStmt.setString(1, request.getParameter("name"));	
			pStmt.setString(2, request.getParameter("phone"));
			pStmt.setString(3, request.getParameter("low"));
			pStmt.setString(4, request.getParameter("high"));
			pStmt.setString(5, request.getParameter("spo2"));
			pStmt.execute();
			out.println("Succeussfully added");
		} catch (SQLException e) {
			e.printStackTrace();
		}
		out.println("</body></html>");
	}
}

searchPatient.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>   
<%@ page language="java" import="java.sql.*"%>    

<%@page import="java.util.*"%>
<sql:setDataSource
        var="Health"
        driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/Health"
        user="root" password="Simplilearn"
    />
<h1> Doctor Home Page </h1>
<a href = "patientForm.jsp"> Add Patient</a><br>
Search Patient 
<br><input type = "text" name = "name"><br>
<a href = "searchPatient.jsp">Search</a> 
<%
String name = request.getParameter("name");
try{
Class.forName("com.mysql.jdbc.Driver");
Connection connection=DriverManager.getConnection("jdbc:mysql://localhost:3306/Health", "root", "Simplilearn");
Statement statement=connection.createStatement();
String sql ="select * from patients ";
ResultSet rs= statement.executeQuery(sql);
while(rs.next()){
%>
<sql:query var="listPatients"   dataSource="${Health}">
       select * from patients;
    </sql:query>
 <div align="center">
        <table border="1" cellpadding="5">
            
            <tr>
                <th>Sr.No</th>
                <th>Name-Age</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Diagnosis</th>
                <th>Remark</th>
                <th>Gender</th>
                <th>Action</th>
            </tr>
            <c:forEach var="patients" items="${listPatients.rows}">
                <tr>
                    <td><c:out value="${patients.id}" /></td>
                    <td><c:out value="${patients.Name_age}" /></td>
                    <td><c:out value="${patients.email}" /></td>
                    <td><c:out value="${patients.phone}" /></td>
                    <td><c:out value="${patients.diagnosis}" /></td>
                    <td><c:out value="${patients.remark}" /></td>
                    <td><c:out value="${patients.gender}" /></td>
                    <td><a href = "manageVitals.jsp"> Manage Vitals</a>
                    		   <a href = "patientForm.jsp"> Update</a> 
                    		   <a href = "patientForm.jsp"> Delete</a></td>
                </tr>
            </c:forEach>
            <%
}
connection.close();
} catch (Exception e) {
e.printStackTrace();
}
%>
        </table>
    </div>


vitalForm.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1> Doctor Home Page </h1>
<h6> Add Patient's Vital Information</h6><br>
Select Patient <br>
Name<br><input type = "text" name = "name"><br>
Phone<br><input type = "text" name = "phone"><br>
BP Low<br><input type = "text" name = "low"><br>
BP High<br><input type = "text" name = "high"><br>
SPO2<br><input type = "text" name = "spo2"><br>
<a href = "patient-vitals">Submit</a> 
</body>
</html>       

patientForm.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<center>
<h1> Health Logger </h1>
<h6> Add/Update Patient Information </h6>
Name_age <input type = "text" name = "name"><br>
Email <input type = "text" name = "email"><br>
Phone <input type = "text" name = "phone"><br>
Diagnosis <input type = "text" name = "diagnosis"><br>
Remark <input type = "text" name = "remark"><br>
Gender<br> <input type = "radio" name = "gender"> Male<br>
<input type = "radio" name = "gender" name = "gender"> Female<br>
<a href = "add-patients">Submit</a>
</center>

NewFile.html

<!DOCTYPE html>
<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<body>
<canvas id="myChart" style="width:100%;max-width:600px"></canvas>
<script>
const xValues = [2.38,4.38,6.48];
new Chart("myChart", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{ 
      data: [70,24,56],
      borderColor: "red",
      fill: false
    }, { 
      data: [120,180,70],
      borderColor: "green",
      fill: false
    }, { 
      data: [34,43,78],
      borderColor: "blue",
      fill: false
    }]
  },
  options: {
    legend: {display: false}
  }
});
</script>

config.properties

url=jdbc:mysql://localhost:3306/Health
userid=root
password=Simplilearn

logout.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Session Logout</title>
</head>
<body>
<%
        session.invalidate();
%>
<b>Your session has terminated.</b><br>
</body>
</html>

delete.jsp

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>   
<%@ page language="java" import="java.sql.*"%>    
<%@page import="java.util.*"%>
<sql:setDataSource
        var="Health"
        driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/Health"
        user="root" password="Simplilearn"
    />
   
     <%
String id = request.getParameter("id");

try{
Class.forName("com.mysql.jdbc.Driver");
Connection connection=DriverManager.getConnection("jdbc:mysql://localhost:3306/Health", "root", "Simplilearn");
Statement statement=connection.createStatement();
String sql ="select * from patients where ID=" + id +" ";
ResultSet rs= statement.executeQuery(sql);
while(rs.next()){
 %>
 <% 
}
connection.close();
} catch (Exception e) {
e.printStackTrace();
}
%>

                    
